"use strict";(self.webpackChunktodolist=self.webpackChunktodolist||[]).push([[808],{7808:(K,f,l)=>{l.r(f),l.d(f,{TodosModule:()=>z});var p=l(6895),m=l(1201),t=l(8256),T=l(2340),v=l(1135),u=l(4004),x=l(529);let k=(()=>{class o{constructor(e){this.http=e,this.todos$=new v.X([])}getTodos(){this.http.get(`${T.N.baseUrl}/todo-lists`).pipe((0,u.U)(e=>e.map(s=>({...s,filter:"all"})))).subscribe(e=>{this.todos$.next(e)})}addTodo(e){this.http.post(`${T.N.baseUrl}/todo-lists`,{title:e}).pipe((0,u.U)(n=>{const s=this.todos$.getValue();return[{...n.data.item,filter:"all"},...s]})).subscribe(n=>{this.todos$.next(n)})}removeTodo(e){this.http.delete(`${T.N.baseUrl}/todo-lists/${e}`).pipe((0,u.U)(()=>this.todos$.getValue().filter(s=>s.id!==e))).subscribe(n=>{this.todos$.next(n)})}updateTodoTitle(e){this.http.put(`${T.N.baseUrl}/todo-lists/${e.todoId}`,{title:e.title}).pipe((0,u.U)(()=>this.todos$.getValue().map(s=>s.id===e.todoId?{...s,title:e.title}:s))).subscribe(n=>{this.todos$.next(n)})}changeFilter(e){const s=this.todos$.getValue().map(r=>r.id===e.todoId?{...r,filter:e.filter}:r);this.todos$.next(s)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(x.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var b=l(2730),a=l(433),M=l(9841),g=(()=>{return(o=g||(g={}))[o.active=0]="active",o[o.completed=2]="completed",g;var o})();let y=(()=>{class o{constructor(e){this.http=e,this.tasks$=new v.X({})}getTasks(e){return this.http.get(`${T.N.baseUrl}/todo-lists/${e}/tasks`).pipe((0,u.U)(n=>n.items)).subscribe(n=>{const s=this.tasks$.getValue();s[e]=n,this.tasks$.next(s)})}addTask(e){this.http.post(`${T.N.baseUrl}/todo-lists/${e.todoId}/tasks`,{title:e.title}).pipe((0,u.U)(n=>{const s=this.tasks$.getValue(),d=[n.data.item,...s[e.todoId]];return s[e.todoId]=d,s})).subscribe(n=>this.tasks$.next(n))}removeTask(e){this.http.delete(`${T.N.baseUrl}/todo-lists/${e.todoId}/tasks/${e.taskId}`).pipe((0,u.U)(()=>{const n=this.tasks$.getValue(),r=n[e.todoId].filter(d=>d.id!==e.taskId);return n[e.todoId]=r,n})).subscribe(n=>this.tasks$.next(n))}updateTask(e){this.http.put(`${T.N.baseUrl}/todo-lists/${e.todoId}/tasks/${e.taskId}`,e.model).pipe((0,u.U)(()=>{const n=this.tasks$.getValue(),r=n[e.todoId].map(d=>d.id===e.taskId?{...d,...e.model}:d);return n[e.todoId]=r,n})).subscribe(n=>this.tasks$.next(n))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(x.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function F(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"input",6),t.NdJ("ngModelChange",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.newTitle=s)})("blur",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.editTitleHandler())}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("ngModel",e.newTitle)}}function w(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"span",7),t.NdJ("dblclick",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.activateEditModeHandler())}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.task.title)}}const E=function(o){return{"completed-task":o}};let Z=(()=>{class o{constructor(){this.removeTaskEvent=new t.vpe,this.changeTaskEvent=new t.vpe,this.taskStatusEnum=g,this.newTitle="",this.editMode=!1}removeTaskHandler(){this.removeTaskEvent.emit({todoId:this.task.todoListId,taskId:this.task.id})}changeTaskStatusHandler(e){this.changeTask({status:e.currentTarget.checked?g.completed:g.active})}activateEditModeHandler(){this.editMode=!0,this.newTitle=this.task.title}editTitleHandler(){this.changeTask({title:this.newTitle}),this.newTitle="",this.editMode=!1}changeTask(e){const n={completed:this.task.completed,startDate:this.task.startDate,priority:this.task.priority,description:this.task.description,deadline:this.task.deadline,status:this.task.status,title:this.task.title,...e};this.changeTaskEvent.emit({todoId:this.task.todoListId,taskId:this.task.id,model:n})}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["tl-task"]],inputs:{task:"task"},outputs:{removeTaskEvent:"removeTaskEvent",changeTaskEvent:"changeTaskEvent"},decls:9,vars:6,consts:[[1,"box"],[1,"task-content",3,"ngClass"],["type","checkbox",1,"checkbox",3,"checked","click"],["class","input","type","text",3,"ngModel","ngModelChange","blur",4,"ngIf","ngIfElse"],["content",""],[1,"deletebutton",3,"click"],["type","text",1,"input",3,"ngModel","ngModelChange","blur"],[1,"tasktitle",3,"dblclick"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label")(3,"input",2),t.NdJ("click",function(r){return n.changeTaskStatusHandler(r)}),t.qZA(),t.YNc(4,F,1,1,"input",3),t.YNc(5,w,2,1,"ng-template",null,4,t.W1O),t.qZA()(),t.TgZ(7,"div",5),t.NdJ("click",function(){return n.removeTaskHandler()}),t._uU(8,"x"),t.qZA()()),2&e){const s=t.MAs(6);t.xp6(1),t.Q6J("ngClass",t.VKq(4,E,n.task.status===n.taskStatusEnum.completed)),t.xp6(2),t.Q6J("checked",n.task.status===n.taskStatusEnum.completed),t.xp6(1),t.Q6J("ngIf",n.editMode)("ngIfElse",s)}},dependencies:[p.mk,p.O5,a.Fj,a.JJ,a.On],styles:['.box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:15px}.checkbox[_ngcontent-%COMP%]{display:none;overflow:visible;color:#fff;background-color:#00937880}.task-content[_ngcontent-%COMP%]{display:flex;margin-bottom:27px}.tasktitle[_ngcontent-%COMP%]{display:block;color:#999;position:relative;padding-left:39px;transition:color .25s;cursor:pointer;z-index:0;font-size:17px;text-transform:capitalize}.tasktitle[_ngcontent-%COMP%]:before{border:1px solid #ccc;content:" ";position:absolute;top:50%;left:0;margin-top:-10px;width:20px;height:20px;border-radius:2px;box-sizing:border-box}.checkbox[_ngcontent-%COMP%]{margin:0;padding:0}.checkbox[_ngcontent-%COMP%]:checked + .tasktitle[_ngcontent-%COMP%]:after{opacity:1;transform:scale(1);box-sizing:border-box}.checkbox[_ngcontent-%COMP%]:checked + .tasktitle[_ngcontent-%COMP%]{text-decoration:line-through}.tasktitle[_ngcontent-%COMP%]:after{opacity:0;content:"\\f00c";color:#fff;background-color:#009378;font-family:"Font Awesome 5 Free";font-size:11px;line-height:21px;font-weight:700;text-align:center;position:absolute;top:50%;left:0;margin-top:-10px;width:20px;height:20px;border-radius:2px;box-sizing:border-box;transform:scale(.3);transition:opacity .25s linear,transform .25s linear}.deletebutton[_ngcontent-%COMP%]{cursor:pointer;margin-top:-28px;color:#999}']}),o})();function O(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tl-task",2),t.NdJ("removeTaskEvent",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.removeTask(s))})("changeTaskEvent",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.changeTask(s))}),t.qZA()}2&o&&t.Q6J("task",i.$implicit)}let J=(()=>{class o{constructor(e,n){this.tasksService=e,this.todosService=n,this.taskTitle=""}ngOnInit(){this.tasks$=(0,M.a)([this.tasksService.tasks$,this.todosService.todos$]).pipe((0,u.U)(e=>{let s=e[0][this.todoId];const d=e[1].find(c=>c.id===this.todoId);return"completed"===d?.filter&&(s=s.filter(c=>c.status===g.completed)),"active"===d?.filter&&(s=s.filter(c=>c.status===g.active)),s})),this.tasksService.getTasks(this.todoId)}addTaskHandler(){this.tasksService.addTask({title:this.taskTitle,todoId:this.todoId}),this.taskTitle=""}removeTask(e){this.tasksService.removeTask(e)}changeTask(e){this.tasksService.updateTask(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(y),t.Y36(k))},o.\u0275cmp=t.Xpm({type:o,selectors:[["tl-tasks"]],inputs:{todoId:"todoId"},decls:3,vars:4,consts:[["type","text","placeholder","Add new task",1,"inputTaskTitle",3,"ngModel","ngModelChange","keyup.enter"],[3,"task","removeTaskEvent","changeTaskEvent",4,"ngFor","ngForOf"],[3,"task","removeTaskEvent","changeTaskEvent"]],template:function(e,n){1&e&&(t.TgZ(0,"input",0),t.NdJ("ngModelChange",function(r){return n.taskTitle=r})("keyup.enter",function(){return n.addTaskHandler()}),t.qZA(),t.YNc(1,O,1,1,"tl-task",1),t.ALo(2,"async")),2&e&&(t.Q6J("ngModel",n.taskTitle),t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,2,n.tasks$)))},dependencies:[p.sg,a.Fj,a.JJ,a.On,Z,p.Ov],styles:[".inputTaskTitle[_ngcontent-%COMP%]{border-radius:5px;height:auto;padding:13px 38px 14px;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #495057;margin-bottom:10px;font-size:14px;margin-left:15px;text-transform:uppercase}"]}),o})();const _=function(o){return{completed:o}};let I=(()=>{class o{constructor(){this.changeFilterEvent=new t.vpe}changeFilterHandler(e){this.changeFilterEvent.emit(e)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["tl-todo-filters"]],inputs:{filter:"filter"},outputs:{changeFilterEvent:"changeFilterEvent"},decls:7,vars:9,consts:[[1,"box"],[3,"ngClass","click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return n.changeFilterHandler("active")}),t._uU(2," Active "),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return n.changeFilterHandler("completed")}),t._uU(4," Completed "),t.qZA(),t.TgZ(5,"button",1),t.NdJ("click",function(){return n.changeFilterHandler("all")}),t._uU(6," All "),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngClass",t.VKq(3,_,"active"===n.filter)),t.xp6(2),t.Q6J("ngClass",t.VKq(5,_,"completed"===n.filter)),t.xp6(2),t.Q6J("ngClass",t.VKq(7,_,"all"===n.filter)))},dependencies:[p.mk],styles:[".box[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.completed[_ngcontent-%COMP%]{background-color:#009378}"]}),o})(),$=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["tl-todo-footer"]],inputs:{addedDate:"addedDate"},decls:3,vars:3,consts:[[1,"box"]],template:function(e,n){1&e&&(t.TgZ(0,"p",0),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,n.addedDate),"\n"))},dependencies:[p.uU],styles:[".box[_ngcontent-%COMP%]{padding-top:10px;border-top:2px solid black}"]}),o})();function A(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"input",9),t.NdJ("ngModelChange",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.newTitle=s)})("blur",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.editTitleHandler())}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("ngModel",e.newTitle)}}function S(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"b",10),t.NdJ("dblclick",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.activateEditModeHandler())}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.todo.title)}}let H=(()=>{class o{constructor(e){this.todosService=e,this.removeTodoEvent=new t.vpe,this.editTodoEvent=new t.vpe,this.isEditMode=!1,this.newTitle=""}removeTodoHandler(){this.removeTodoEvent.emit(this.todo.id)}activateEditModeHandler(){this.newTitle=this.todo.title,this.isEditMode=!0}editTitleHandler(){this.isEditMode=!1,this.editTodoEvent.emit({todoId:this.todo.id,title:this.newTitle})}changeFilter(e){this.todosService.changeFilter({filter:e,todoId:this.todo.id})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(k))},o.\u0275cmp=t.Xpm({type:o,selectors:[["tl-todo"]],inputs:{todo:"todo"},outputs:{removeTodoEvent:"removeTodoEvent",editTodoEvent:"editTodoEvent"},decls:11,vars:5,consts:[[1,"box"],[1,"todo-header"],["class","todo-title","type","text",3,"ngModel","ngModelChange","blur",4,"ngIf","ngIfElse"],["content",""],[3,"click"],[1,"list-group"],[3,"todoId"],[3,"filter","changeFilterEvent"],[3,"addedDate"],["type","text",1,"todo-title",3,"ngModel","ngModelChange","blur"],[1,"todo-title",3,"dblclick"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,A,1,1,"input",2),t.YNc(3,S,2,1,"ng-template",null,3,t.W1O),t.TgZ(5,"button",4),t.NdJ("click",function(){return n.removeTodoHandler()}),t._uU(6,"x"),t.qZA()(),t._UZ(7,"div",5)(8,"tl-tasks",6),t.TgZ(9,"tl-todo-filters",7),t.NdJ("changeFilterEvent",function(r){return n.changeFilter(r)}),t.qZA(),t._UZ(10,"tl-todo-footer",8),t.qZA()),2&e){const s=t.MAs(4);t.xp6(2),t.Q6J("ngIf",n.isEditMode)("ngIfElse",s),t.xp6(6),t.Q6J("todoId",n.todo.id),t.xp6(1),t.Q6J("filter",n.todo.filter),t.xp6(1),t.Q6J("addedDate",n.todo.addedDate)}},dependencies:[p.O5,a.Fj,a.JJ,a.On,J,I,$],styles:['.box[_ngcontent-%COMP%]{padding:27px;margin:30px;display:flex;flex-direction:column;gap:10px;color:#696969;background-color:#fff;border-radius:5px;box-shadow:0 1px 5px #00000014;width:300px}.todo-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px;align-items:center}.todo-header[_ngcontent-%COMP%]:before{content:" ";display:table;box-sizing:border-box}.todo-title[_ngcontent-%COMP%]{float:left;margin-top:3px;margin-bottom:3px;font-size:14px;line-height:24px;font-weight:700;text-transform:uppercase;color:#393939}.list-group[_ngcontent-%COMP%]{position:relative;z-index:0;margin-bottom:0;padding-top:23px}.list-group[_ngcontent-%COMP%]:before{content:" ";margin-left:15px;right:20px;border-top:1px solid #eee;position:absolute;top:50%;left:0;margin-top:-10px;width:185px;height:20px;border-radius:2px;box-sizing:border-box}']}),o})();function N(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tl-todo",7),t.NdJ("removeTodoEvent",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.removeTodo(s))})("editTodoEvent",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.editTodo(s))}),t.qZA()}2&o&&t.Q6J("todo",i.$implicit)}function C(o,i,e,n,s,r,d){try{var c=o[r](d),h=c.value}catch(Q){return void e(Q)}c.done?i(h):Promise.resolve(h).then(n,s)}const G=[{path:"",component:(()=>{class o{constructor(e,n){this.todosService=e,this.authService=n,this.todoTitle=""}ngOnInit(){this.todos$=this.todosService.todos$,this.todosService.getTodos()}addTodoHandler(){this.todosService.addTodo(this.todoTitle),this.todoTitle=""}removeTodo(e){this.todosService.removeTodo(e)}editTodo(e){this.todosService.updateTodoTitle(e)}logoutHandler(){this.authService.logout()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(k),t.Y36(b.e))},o.\u0275cmp=t.Xpm({type:o,selectors:[["tl-todos"]],decls:13,vars:4,consts:[[1,"todos-bc"],[1,"todos-header"],[3,"click"],[1,"todos-input"],["type","text","placeholder","Add new Todo",1,"input",3,"ngModel","ngModelChange"],[1,"todos-box"],[3,"todo","removeTodoEvent","editTodoEvent",4,"ngFor","ngForOf"],[3,"todo","removeTodoEvent","editTodoEvent"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1"),t._uU(3,"Angular TODO"),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){return n.logoutHandler()}),t._uU(5,"logout"),t.qZA()(),t.TgZ(6,"div",3)(7,"input",4),t.NdJ("ngModelChange",function(r){return n.todoTitle=r}),t.qZA(),t.TgZ(8,"button",2),t.NdJ("click",function(){return n.addTodoHandler()}),t._uU(9,"+"),t.qZA()(),t.TgZ(10,"div",5),t.YNc(11,N,1,1,"tl-todo",6),t.ALo(12,"async"),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("ngModel",n.todoTitle),t.xp6(4),t.Q6J("ngForOf",t.lcZ(12,2,n.todos$)))},dependencies:[p.sg,a.Fj,a.JJ,a.On,H,p.Ov],styles:[".todos-bc[_ngcontent-%COMP%]{background-color:#ebebea}.todos-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;justify-content:center;color:#393939}.todos-input[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-bottom:20px;gap:10px}input[_ngcontent-%COMP%]{width:300px;padding:10px 20px}.todos-box[_ngcontent-%COMP%]{display:flex;gap:30px;flex-wrap:wrap}"]}),o})(),pathMatch:"full",canActivate:[(()=>{class o{constructor(e,n){this.authService=e,this.router=n}canActivate(e,n){var s=this;return function P(o){return function(){var i=this,e=arguments;return new Promise(function(n,s){var r=o.apply(i,e);function d(h){C(r,n,s,d,c,"next",h)}function c(h){C(r,n,s,d,c,"throw",h)}d(void 0)})}}(function*(){yield s.authService.authRequest;const r=s.authService.isAuth;return r||s.router.navigate(["/login"]),r})()}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(b.e),t.LFG(m.F0))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()]}];let q=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[m.Bz.forChild(G),m.Bz]}),o})(),z=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.ez,q,a.u5]}),o})()}}]);